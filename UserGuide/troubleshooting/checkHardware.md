# ハードウェアを確認する

プログラムを正常に動作させるため、下記の事項を確実にしてください。

### ファームウェア

ファームウェアが古いことで、正しくプログラムが動作しない場合があります。

- ファームウェアを更新する

```sh
sudo rpi-update
```

### MONOSCITK
MONOSTICKが正しくセットアップされていないことが原因となる場合があります。

- MONOSTICKが正しく接続されていることを確認する

- MONOSTICKに書き込まれているプログラムが正しいことを確認する
　MONOSTICK専用のプログラムが書き込まれていないと正しくデータを受信できない場合があります。

- MONOSTICKのApplicationIDが子機側と一致していることを確実にする。
  - なお、C3lessセンサは待機電力を減らすため、OTAを禁止しています。

保存先としてUSB記憶媒体を用いる際は、上記に加え、下記の事項を確認してください。

- 保存対象のUSBデバイスが接続されていること
- USBデバイスがマウントされていること

下記のコマンドを実行して、USBデバイスがマウントされていることを確認してください。

```sh
cat /etc/fstab
```

マウントされていない場合は、下記のコマンドでマウントしてください

```sh
mount -t vfat /dev/[認識されているデバイス名] [マウント先]
```

- USBデバイスのマウント先と、settings.yamlで指定したディレクトリが一致していること。

```sh
ls -a [settings.yamlに記載されたディレクトリ]
```

を実行して、ディレクトリが表示されることを確認してください。

- USBデバイスが複数認識されていないこと
前項のコマンドを実行した際に、結果が複数表示されないことを確認してください。

また、原因不明ですが、<u>USBデバイスを一つしか接続していないにも関わらず、複数のディレクトリとして認識される場合があります</u>。この場合、下記のコマンドで片方のディレクトリを削除してください。

```sh
rm -R [USBのマウント先]/[片方のディレクトリ]
```

- USBデバイスが読み取り専用でないこと

```sh
ls -l [USBデバイスのマウント先]
```
を行い、結果が`dr--r--r--`のようになっていないことを確実にしてください。
`drwxrwxrwx`のように、`w`が記載されていることを確実にしてください。
読み取り専用の場合、下記のコマンドを実行します。

```
chmod +w [USBメモリのパス]
```

もう一度`ls -l`を実行して改善しない場合、USBメモリのファイルシステムがFAT32である可能性が高いです。

USBメモリをexFat形式でフォーマットし、再度試してみてください。