# センサのデータを計算する

センサは、

より高い精度を得るため、センサの計算式を校正することもできます。詳しくは[計算式の校正方法](#計算式の校正方法)を御覧ください。

センサの値は、以下の計算式で求めることができます。



ここで、それぞれの記号は以下の値を意味します。

$$
\begin{eqnarray}
I &=& KV+C
\end{eqnarray}
$$

I:電流[A]

V:センサからの電圧[mV]

K:センサごとに決まる比例定数[-]

C:センサごとに決まる定数[-]

各センサごとの定数は以下のとおりです

- 低電流用クランプセンサ
  - K: 
  - C: 
- 低電流用貫通型センサ
  - K:
  - C:
- 中電流用クランプセンサ
  - K:
  - C:

## 計算式の校正方法

センサの計算式を校正することで、センサごとのデータのばらつきをなくし、より高い精度のデータを得ることができます。

1. まず、センサを電線に設置します。

2. 次に、センサの電線を

校正のために実際にデバイスを動作させてデータを記録する．計測対象の実際の電流を縦軸，デバイスから送信されるデータを横軸に取ったグラフをExcelで作成する(図1)．電流はクランプメーターで測定する．送信されるデータは;区切りの9ｓ番目を使用する．
;1001;00000000;195;001;1007bbd;3330;0009;1110;1526;0009;A;
①	      ②　　③　④　　⑤　　⑥　　⑦　⑧　 ⑨　 ⑩ ⑪
ただし，④が000~001の場合のデータを無視する．回路の仕様上，起動後の数回は正しい値が送信されないため，④が000~001のときは電力に対応させることができない．

(2)	近似式を作成
作成したグラフにExcelの機能で1次近似を追加し，その直線の換算式を表示させる．この換算式をソースコードに反映させることで電流値が得られる．換算式のxが送信されるデータに対応し，yがそのときの計測対象の電流値に対応する．
 
図1 デバイス校正データの取得例
